definitions:
  handlers.CameraListResponse:
    properties:
      cameras:
        items:
          $ref: '#/definitions/handlers.CameraResponse'
        type: array
      total:
        example: 3
        type: integer
    type: object
  handlers.CameraResponse:
    properties:
      camera_id:
        example: cam1
        type: string
      message:
        example: Camera started successfully
        type: string
      status:
        example: active
        type: string
      stream_url:
        example: rtsp://camera.example.com/stream
        type: string
    type: object
  handlers.CameraStatusResponse:
    properties:
      active:
        example: true
        type: boolean
      camera_id:
        example: cam1
        type: string
      processing_info:
        additionalProperties: true
        type: object
      stream_info:
        additionalProperties: true
        type: object
      webrtc_info:
        additionalProperties: true
        type: object
    type: object
  handlers.HealthResponse:
    properties:
      status:
        example: healthy
        type: string
      worker_id:
        example: worker-1
        type: string
    type: object
  handlers.StartCameraRequest:
    properties:
      solutions:
        example:
        - person_detection
        - ppe_detection
        items:
          type: string
        type: array
      stream_url:
        example: rtsp://camera.example.com/stream
        type: string
    required:
    - solutions
    - stream_url
    type: object
  handlers.StreamURLsResponse:
    properties:
      camera_id:
        example: cam1
        type: string
      hls:
        example: http://172.17.0.1:8888/camera_cam1/index.m3u8
        type: string
      rtsp:
        example: rtsp://172.17.0.1:8554/camera_cam1
        type: string
      webrtc:
        example: http://172.17.0.1:8889/camera_cam1/whep
        type: string
    type: object
  handlers.SystemStatsResponse:
    properties:
      cpu_cores:
        example: 8
        type: integer
      go_version:
        example: go1.21.0
        type: string
      goroutines:
        example: 25
        type: integer
      memory_mb:
        example: 45
        type: integer
      uptime:
        example: 2h30m15s
        type: string
      worker_id:
        example: worker-1
        type: string
    type: object
  handlers.WorkerInfoResponse:
    properties:
      capabilities:
        items:
          type: string
        type: array
      status:
        example: running
        type: string
      version:
        example: 1.0.0
        type: string
      worker_id:
        example: worker-1
        type: string
    type: object
info:
  contact: {}
paths:
  /:
    get:
      consumes:
      - application/json
      description: Get basic worker information and capabilities
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.WorkerInfoResponse'
      summary: Worker information
      tags:
      - health
  /cameras:
    get:
      consumes:
      - application/json
      description: Get list of all cameras and their status
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.CameraListResponse'
      summary: List all cameras
      tags:
      - cameras
  /cameras/{id}/start:
    post:
      consumes:
      - application/json
      description: Start processing for a camera with RTSP stream
      parameters:
      - description: Camera ID
        in: path
        name: id
        required: true
        type: string
      - description: Camera configuration
        in: body
        name: camera
        required: true
        schema:
          $ref: '#/definitions/handlers.StartCameraRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.CameraResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Start camera processing
      tags:
      - cameras
  /cameras/{id}/status:
    get:
      consumes:
      - application/json
      description: Get detailed status of a specific camera
      parameters:
      - description: Camera ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.CameraStatusResponse'
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get camera status
      tags:
      - cameras
  /cameras/{id}/stop:
    post:
      consumes:
      - application/json
      description: Stop processing for a camera
      parameters:
      - description: Camera ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.CameraResponse'
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Stop camera processing
      tags:
      - cameras
  /health:
    get:
      consumes:
      - application/json
      description: Check if the worker is healthy and responsive
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.HealthResponse'
      summary: Health check
      tags:
      - health
  /system/stats:
    get:
      consumes:
      - application/json
      description: Get system performance metrics and status
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.SystemStatsResponse'
      summary: Get system statistics
      tags:
      - system
  /webrtc/{id}/urls:
    get:
      consumes:
      - application/json
      description: Get streaming URLs for all formats (HLS, WebRTC, RTSP) for a camera
      parameters:
      - description: Camera ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.StreamURLsResponse'
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get stream URLs
      tags:
      - webrtc
  /webrtc/stats:
    get:
      consumes:
      - application/json
      description: Get WebRTC publishing statistics for a camera or all cameras
      parameters:
      - description: Camera ID (optional, returns all if not specified)
        in: query
        name: id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: Get WebRTC statistics
      tags:
      - webrtc
swagger: "2.0"
